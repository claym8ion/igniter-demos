(function(e){var t={parseUrl:function(e){var t,n;return e.indexOf("youtube.com/watch")!==-1?(t="youtube",n=e.substr(e.lastIndexOf("v=")+2,11)):e.indexOf("youtu.be")!==-1?(t="youtube",n=e.substr(-11)):e.indexOf("vimeo.com")!==-1&&(t="vimeo",n=e.substr(e.indexOf("vimeo.com/")+10)),{service:t,key:n}},fetchThumbnail:function(e,n,r){t[e]._fetchThumbnail(n,r)},determineEmbedSrc:function(e,n,r){t[e]._determineEmbedSrc(n,r)},youtube:{_fetchThumbnail:function(e,t){t("http://img.youtube.com/vi/"+e+"/0.jpg")},_determineEmbedSrc:function(e,t){t("http://www.youtube.com/embed/"+e+"?enablejsapi=1&wmode=opaque&origin="+document.domain)}},vimeo:{_fetchThumbnail:function(t,n){e.getJSON("http://www.vimeo.com/api/v2/video/"+t+".json?callback=?",{format:"json"},function(e){n(e[0].thumbnail_large)})},_determineEmbedSrc:function(e,t){t("http://player.vimeo.com/video/"+e+"?wmode=opaque")}}};e(document).on("click","div#collection-show button, a.view-collection",function(){return e(".slider").removeClass("disappear").addClass("fadeInUp"),e("div.overlay").fadeIn(),!1}),e(document).on("click","a.product-link",function(){return e(".slider").removeClass("disappear").addClass("fadeInUp"),e("div.overlay").fadeIn(),!1}),e(document).on("click","div.product-close, div.overlay",function(){e(".slider").addClass("disappear").removeClass("fadeInUp"),e("div.overlay").fadeOut()}),e(document).on("click",".image-gallery a",function(){var t=e(this);return e(".main-image img").attr("src",t.attr("href")),t.addClass("active").siblings().removeClass("active"),!1}),e(document).on("click","#action a",function(){return e("#slider").addClass("fadeInUp"),e("div.overlay").fadeIn(),!1}),e(document).on("click","#slider .close, div.overlay",function(){return e("#slider").removeClass("fadeInUp"),e("div.overlay").fadeOut(),!1}),e(document).on("click","#slider .close",function(){e("#slider").removeClass("fadeInUp"),e(".before").removeClass("hide"),e(".after").removeClass("show")}),e(document).on("click","a.submit",function(){return e(this).closest("form").submit(),!1}),e(document).on("submit","form",function(){var t=e(this),n=t.attr("action"),r=t.attr("method"),i=t.serializeArray();return i.length>0&&e.ajax({url:n,type:r,data:i}).done(function(){e(".before").addClass("hide"),e(".after").addClass("show")}).fail(function(e){alert("Failure! Server responded with ("+e.status+") "+e.statusText)}),!1}),e(document).ready(function(){e("iframe[data-video]").each(function(){var n=e(this),r=n.data("video"),i=t.parseUrl(r);t.determineEmbedSrc(i.service,i.key,function(e){n.attr("src",e)})}),e(".flexslider").flexslider({animation:"fade",animationSpeed:200,animationLoop:!1,directionNav:!1,controlsContainer:".flexslider-nav",controlNav:!0,manualControls:"ul#thumbnails li a",useCSS:!1,smoothHeight:!0,slideshow:!1,touch:!1,startAt:function(){var t=e(".flexslider-nav");return t.index("[data-video]")||0}(),start:function(n){n.controlNav.filter("[data-video]").each(function(r){var i=e("img",this),s=n.slides.filter(".video").find("iframe")[r],o=e(this).data("video"),u=t.parseUrl(o);t.fetchThumbnail(u.service,u.key,function(e){i.attr("src",e)}),t.determineEmbedSrc(u.service,u.key,function(e){s.src=e})})},before:function(t){var n=t.slides.eq(t.currentSlide);if(n.hasClass("video")){var r=e("iframe",n)[0];r.src=r.src}}}),e("ul#thumbnails li.video a").prepend('<span class="play"></span>'),e(".instagram").each(function(){var t=e(this),n=t.data("hashtag"),r="baee48560b984845974f6b85a07bf7d9",i;t.instagram({hash:n,clientId:r,show:18,onComplete:function(e,n){e.length?(i=n.pagination.next_url,t.children("div:gt(8)").remove()):t.next("button.more").remove()}}),t.next("button.more").click(function(){var n=e(this),r=n.text(),s="Loadingâ€¦";n.text()!==s&&(n.text(s),t.instagram({next_url:i,show:9,onComplete:function(e,t){e.length?(i=t.pagination.next_url,n.text(r)):n.remove()}}))})})})})(jQuery);